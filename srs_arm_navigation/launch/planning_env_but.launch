<launch>

  <!-- self filter stereo points -->
  <node pkg="robot_self_filter" type="self_filter" respawn="true" name="stereo_self_filter" output="screen">
     <remap from="cloud_in" to="/cam3d/depth/points" />
     <remap from="cloud_out" to="/cam3d/depth/points_filtered" />
     <param name="subsample_value" type="double" value=".01"/>
     <rosparam command="load" file="$(find cob_arm_navigation_but)/config/self_filter.yaml" />
  </node>
  
   <node pkg="planning_environment" type="environment_server" output="screen" name="environment_server">      
    <param name="use_monitor" type="bool" value="true"/>
    <param name="use_collision_map" type="bool" value="true"/>
    <param name="global_frame" type="string" value="/map"/>
    <remap from="collision_map_occ" to="/but_server_node/butsrv_collision_map"/>
  </node>
  
  <!-- Run BUT dynamic scene model server node -->
  <node name="but_server_node" pkg="srs_env_model" type="but_server_node">
    <param name="pointcloud_subscriber" value="/cam3d/depth/points_filtered"/>
    <param name="max_range" type="double" value="2.5"/>
  </node>
  
</launch>
